datasource db {
    provider  = "postgresql"
    url       = env("DATABASE_URL")
    directUrl = env("DIRECT_URL")
}

generator client {
    provider = "prisma-client-js"
}

model Charity {
    id                 String            @id @default(uuid())
    charityName        String?           @map("charity_name")
    registeredAddress  String?           @map("registered_address")
    registrationNumber String?           @map("registration_number")
    contactName        String?           @map("contact_name")
    contactEmail       String?           @map("contact_email")
    contactPhone       String?           @map("contact_phone")
    walletAddress      String            @unique @map("wallet_address")
    isProfileComplete  Boolean           @default(false)
    createdAt          DateTime          @default(now())
    donationReceipts   DonationReceipt[]
}

model Donor {
    id                String            @id @default(uuid())
    walletAddress     String            @unique
    email             String?           @unique
    firstName         String?
    lastName          String?
    address           String?
    donationReceipts  DonationReceipt[]
    isProfileComplete Boolean           @default(false)
    createdAt         DateTime          @default(now())
    updatedAt         DateTime          @updatedAt
}

model DonationReceipt {
    id              String   @id @default(uuid())
    receiptNumber   String   @unique
    donationDate    DateTime
    fiatAmount      Float
    transactionHash String
    charityId       String?
    charity         Charity? @relation(fields: [charityId], references: [id])
    donorId         String?
    donor           Donor?   @relation(fields: [donorId], references: [id])
    createdAt       DateTime @default(now())
    updatedAt       DateTime @updatedAt
}
